# ============================================================
# ShellIA - Docker Compose (Linux / Ubuntu)
# ============================================================
# Usage :
#   Start   : docker compose up -d
#   Logs    : docker compose logs -f
#   Stop    : docker compose down
#   Rebuild : docker compose up -d --build
#   Pull    : docker compose pull
# ============================================================

services:

  shellia:
    image: blackbeardteam/shellia:latest
    container_name: shellia
    restart: unless-stopped

    ports:
      - "${SHELLIA_PORT:-8000}:8000"

    environment:
      - SHELLIA_ENV=${SHELLIA_ENV:-local}
      - TZ=${TZ:-Europe/Paris}
      # ⚠️  Generate with: openssl rand -hex 32
      - SECRET_KEY=${SECRET_KEY:-}

    volumes:
      # User database (SQLite)
      - shellia_data:/app/data
      # User profiles, environments and APIs
      - shellia_users:/app/users
      # Global environments
      - shellia_environments:/app/environments

    networks:
      - shellia_net

    deploy:
      resources:
        limits:
          memory: 512M
          cpus: "1.0"
        reservations:
          memory: 128M

volumes:
  shellia_data:
    name: shellia_data
  shellia_users:
    name: shellia_users
  shellia_environments:
    name: shellia_environments

networks:
  shellia_net:
    name: shellia_net
    driver: bridge
